<div class="cmd cmd-widget #history#" data-type="info" data-subtype="numeric" data-template="tile" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" data-eqLogic_id="#eqLogic_id#">
  <div class="title #hide_name#">
    <div  class="cmdName">#name_display#</div>
  </div>
  <div class="content-sm">
    <table><TR style="valign:center"><TD><span class="pull-right state"></span></TD><TD><span class="pull-right unit">#unite#</span></TD></TR></table>
  </div>
  <div class="value #hide_history#">
    <div class="col-xs-12 center-block">
      <span title='{{Min}}' class='tooltips'>#minHistoryValue#</span>|<span title='{{Moyenne}}' class='tooltips'>#averageHistoryValue#</span>|<span title='{{Max}}' class='tooltips'>#maxHistoryValue#</span> <i class="#tendance#"></i>
    </div>
  </div>
  <template></template>
  <script>
     jeedom.cmd.addUpdateFunction('#id#',function(_options) {
      document.querySelector('.cmd[data-cmd_id="#id#"]').setAttribute('title', '{{Date de valeur}} : '+_options.valueDate+'<br/>{{Date de collecte}} : '+_options.collectDate)
      if (_options.display_value>0) {
        document.querySelector('.cmd[data-cmd_id="#id#"] .state').innerHTML=_options.display_value;
        document.querySelector('.cmd[data-cmd_id="#id#"] .unit').innerHTML=_options.unit;
      } else {
        //console.log(_options);
        document.querySelector('.cmd[data-cmd_id="#id#"] .state').innerHTML='<span class="label label-primary" style="font-size : 1em;" title="{{Secteur}}"><i class="fa fa-plug"></i></span>';   
        document.querySelector('.cmd[data-cmd_id="#id#"] .unit').innerHTML="";
      }
    });

    jeedom.cmd.refreshValue([{cmd_id :'#id#',display_value: '#state#', valueDate: '#valueDate#', collectDate: '#collectDate#', alertLevel: '#alertLevel#', unit: '#unite#'}])
  </script>
</div>
